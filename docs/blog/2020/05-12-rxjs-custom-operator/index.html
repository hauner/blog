<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <title>Software Noise</title>
  <base href="/test-blog/">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <link rel="icon" type="image/png" href="assets/avatar-480x480.png">
<link rel="stylesheet" href="styles.ffd6029eb0985a5de90a.css"><style></style><script charset="utf-8" src="common-es2015.8ab06bb5f6b44dbd2455.js"></script><script charset="utf-8" src="2-es2015.f701625c23912672428b.js"></script><script charset="utf-8" src="7-es2015.ec0f0d6be8b3ac58f66e.js"></script><style>a.logo[_ngcontent-otx-c9]{display:flex;align-items:center}a.logo[_ngcontent-otx-c9]   img[_ngcontent-otx-c9]{margin-right:.5rem;width:2rem}a.oap[_ngcontent-otx-c9]{display:flex;align-items:center}a.oap[_ngcontent-otx-c9]   img[_ngcontent-otx-c9]{width:2.5rem}@media screen and (max-width:980px){#header[_ngcontent-otx-c9]   .links[_ngcontent-otx-c9]{display:block}}@media screen and (max-width:736px){li.hide[_ngcontent-otx-c9]{display:none!important}}</style><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><script>window['ScullyIO']='generated';</script></head>
<body scully-version="0.0.0">
  <app-root _nghost-otx-c7="" ng-version="9.1.7"><router-outlet _ngcontent-otx-c7=""></router-outlet><app-blog _nghost-otx-c12=""><div _ngcontent-otx-c12="" id="wrapper">

  <app-header _ngcontent-otx-c12="" _nghost-otx-c9=""><header _ngcontent-otx-c9="" id="header"><h1 _ngcontent-otx-c9=""><a _ngcontent-otx-c9="" class="logo" href="/"><img _ngcontent-otx-c9="" src="assets/avatar-480x480.png" alt="avatar"><span _ngcontent-otx-c9="">Software Noise</span></a></h1><nav _ngcontent-otx-c9="" class="links"><ul _ngcontent-otx-c9="" style="display: flex; justify-content: flex-end; height: 100%; align-items: center; margin-right: 2rem;"><li _ngcontent-otx-c9=""><a _ngcontent-otx-c9="" href="https://hauner.github.io/openapi-processor" class="oap"><img _ngcontent-otx-c9="" src="assets/openapi-processor-p.svg" alt="openapi-processor"><span _ngcontent-otx-c9="">openapi-processor</span></a></li><li _ngcontent-otx-c9="" class="hide"><a _ngcontent-otx-c9="" href="https://openapi-processor-playground.appspot.com/" class="oap"><img _ngcontent-otx-c9="" src="assets/openapi-processor-p.svg" alt="oappenapi-processor playground"><span _ngcontent-otx-c9="">playground</span></a></li></ul></nav></header></app-header>

  <div _ngcontent-otx-c12="" id="main">

    <div _ngcontent-otx-c12="">

      <article _ngcontent-otx-c12="" class="post">

        <header _ngcontent-otx-c12="">
          <div _ngcontent-otx-c12="" class="title">
            <h2 _ngcontent-otx-c12="">creating a custom rxjs operator</h2>
            <p _ngcontent-otx-c12="">extracting a custom rxjs operator from an observable pipe chain.</p>
          </div>
          <div _ngcontent-otx-c12="" class="meta">
            <time _ngcontent-otx-c12="" class="published" datetime="2020-05-12T00:00:00.000Z">Tuesday, May 12, 2020</time>

            <div _ngcontent-otx-c12="" class="tags">
              <ul _ngcontent-otx-c12="" class="stats">
                <li _ngcontent-otx-c12="">
                  <a _ngcontent-otx-c12="" href="/tags/rxjs">
                    <span _ngcontent-otx-c12="" class="icon solid fa-tag">rxjs</span>
                  </a>
                </li><li _ngcontent-otx-c12="">
                  <a _ngcontent-otx-c12="" href="/tags/angular">
                    <span _ngcontent-otx-c12="" class="icon solid fa-tag">angular</span>
                  </a>
                </li><!---->
              </ul>
            </div>

          </div>
        </header>

        <!--scullyContent-begin--><div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">Using multiple <code _ngcontent-otx-c12="">pipe</code> operators on an <code _ngcontent-otx-c12="">Observable</code> to do <strong _ngcontent-otx-c12="">one thing</strong> makes it harder to understand.
This is the same problem as in "normal" code.</p>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">With normal code we extract a method if the steps involved don’t fit the abstraction level of the
code we are working at. We can do the same with an <code _ngcontent-otx-c12="">Observable</code> by extracting the steps into a custom
rxjs operator.</p>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">Lets say we have an <code _ngcontent-otx-c12="">article$</code> observable: <code _ngcontent-otx-c12="">Observable&lt;Article[]&gt;</code>. It provides a list of all blog
articles unordered and with a mix of published and unpublished articles.</p>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">We want to find the latest published article. That could look like this:</p>
</div>
<div class="listingblock" _ngcontent-otx-c12="">
<div class="content" _ngcontent-otx-c12="">
<pre class="highlight" _ngcontent-otx-c12=""><code class="language-typescript" data-lang="typescript" _ngcontent-otx-c12="">articles$
.pipe(
    map (articles =&gt; {
      return articles
        .filter (r =&gt; r.published)
        .sort((l, r) =&gt; r.date.localeCompare (l.date))
        .shift()
    })
)
.subscribe(...);</code></pre>
</div>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">If we want to use the latest published article we don’t care so much about the details to get it.
The code would be easier to read if it would just say:</p>
</div>
<div class="listingblock" _ngcontent-otx-c12="">
<div class="content" _ngcontent-otx-c12="">
<pre class="highlight" _ngcontent-otx-c12=""><code class="language-typescript" data-lang="typescript" _ngcontent-otx-c12="">articles$
  .pipe(
    latest()
  )
  .subscribe(...);</code></pre>
</div>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">It is possible with a custom rxjs operator.</p>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">The function returns a factory function that takes the source <code _ngcontent-otx-c12="">observable</code> as parameter and returns
it modified by the pipe operator chain we used in the initial code:</p>
</div>
<div class="listingblock" _ngcontent-otx-c12="">
<div class="content" _ngcontent-otx-c12="">
<pre class="highlight" _ngcontent-otx-c12=""><code class="language-typescript" data-lang="typescript" _ngcontent-otx-c12="">export function latest (): OperatorFunction&lt;Article[], Article&gt; {
  return (source$: Observable&lt;Article[]&gt;) =&gt; {
    return source$
      .pipe(
        map (routes =&gt; {
          return routes
            .filter (r =&gt; r.published)
            .sort((l, r) =&gt; r.date.localeCompare (l.date)
            .shift()
        })
      )
  };
}</code></pre>
</div>
</div>
<div class="paragraph" _ngcontent-otx-c12="">
<p _ngcontent-otx-c12="">That’s it. <i class="far fa-smile" _ngcontent-otx-c12=""></i></p>
</div><!--scullyContent-end--><script>try {window['scullyContent'] = {cssId:"_ngcontent-otx-c12",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script><scully-content _ngcontent-otx-c12=""></scully-content>

        <footer _ngcontent-otx-c12="">
          
        </footer>
      </article>

      
      <ul _ngcontent-otx-c12="" class="actions pagination">
        <li _ngcontent-otx-c12="">
          <a _ngcontent-otx-c12="" class="button large previous" href="/blog/2020/05-05-angular-body-class">Previous Article - 05.05.20</a><!---->
          <!---->
        </li>

        <li _ngcontent-otx-c12="">
          <!---->
          <a _ngcontent-otx-c12="" class="button large next disabled">No Previous Article</a><!---->
        </li>
      </ul>

    </div><!---->

    

  </div>

  <app-sidebar _ngcontent-otx-c12="" _nghost-otx-c10=""><section _ngcontent-otx-c10="" id="sidebar"><section _ngcontent-otx-c10="" id="intro"><a _ngcontent-otx-c10="" class="logo" href="/"><img _ngcontent-otx-c10="" src="assets/avatar-480x480.png" alt="avatar"></a><header _ngcontent-otx-c10=""><p _ngcontent-otx-c10="">my Exocortex Memory</p></header></section><section _ngcontent-otx-c10=""><ul _ngcontent-otx-c10="" class="posts"><li _ngcontent-otx-c10=""><article _ngcontent-otx-c10=""><header _ngcontent-otx-c10=""><h3 _ngcontent-otx-c10="" style="margin-bottom: 0;"><a _ngcontent-otx-c10="" href="/blog/2020/05-12-rxjs-custom-operator">creating a custom rxjs operator</a></h3><div _ngcontent-otx-c10="" class="tags"><ul _ngcontent-otx-c10="" class="stats"><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="/tags/rxjs"><span _ngcontent-otx-c10="" class="icon solid fa-tag">rxjs</span></a></li><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="/tags/angular"><span _ngcontent-otx-c10="" class="icon solid fa-tag">angular</span></a></li><!----></ul></div><time _ngcontent-otx-c10="" class="published" datetime="2020-05-12T00:00:00.000Z">May 12, 2020</time></header></article></li><li _ngcontent-otx-c10=""><article _ngcontent-otx-c10=""><header _ngcontent-otx-c10=""><h3 _ngcontent-otx-c10="" style="margin-bottom: 0;"><a _ngcontent-otx-c10="" href="/blog/2020/05-05-angular-body-class">modifying &lt;body&gt; css classes in angular</a></h3><div _ngcontent-otx-c10="" class="tags"><ul _ngcontent-otx-c10="" class="stats"><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="/tags/angular"><span _ngcontent-otx-c10="" class="icon solid fa-tag">angular</span></a></li><!----></ul></div><time _ngcontent-otx-c10="" class="published" datetime="2020-05-05T00:00:00.000Z">May 5, 2020</time></header></article></li><li _ngcontent-otx-c10=""><article _ngcontent-otx-c10=""><header _ngcontent-otx-c10=""><h3 _ngcontent-otx-c10="" style="margin-bottom: 0;"><a _ngcontent-otx-c10="" href="/blog/2020/04-28-first">Test!</a></h3><div _ngcontent-otx-c10="" class="tags"><ul _ngcontent-otx-c10="" class="stats"><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="/tags/foo"><span _ngcontent-otx-c10="" class="icon solid fa-tag">foo</span></a></li><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="/tags/bar"><span _ngcontent-otx-c10="" class="icon solid fa-tag">bar</span></a></li><!----></ul></div><time _ngcontent-otx-c10="" class="published" datetime="2020-04-28T00:00:00.000Z">April 28, 2020</time></header></article></li><!----></ul></section><!----><section _ngcontent-otx-c10="" id="footer"><ul _ngcontent-otx-c10="" class="icons"><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="https://twitter.com/MartinHauner" class="icon brands fa-twitter"><span _ngcontent-otx-c10="" class="label">Twitter</span></a></li><li _ngcontent-otx-c10=""><a _ngcontent-otx-c10="" href="https://github.com/hauner" class="icon brands fa-github"><span _ngcontent-otx-c10="" class="label">GitHub</span></a></li></ul><p _ngcontent-otx-c10="" class="copyright" style="margin-bottom: 1rem;">© Martin Hauner <span _ngcontent-otx-c10="" style="display: block;">design by <a _ngcontent-otx-c10="" href="http://html5up.net">HTML5 UP</a></span><span _ngcontent-otx-c10="">built with <a _ngcontent-otx-c10="" href="https://github.com/scullyio/scully">Scully</a></span></p></section></section></app-sidebar>

</div>
</app-blog><!----></app-root>
<script id="ScullyIO-transfer-state"></script><script src="runtime-es2015.9f0c51eb2e039b8bca48.js" type="module"></script><script src="runtime-es5.9f0c51eb2e039b8bca48.js" nomodule="" defer=""></script><script src="polyfills-es5.d7b77918385eed40813a.js" nomodule="" defer=""></script><script src="polyfills-es2015.5af7dd0d5958d41a77f5.js" type="module"></script><script src="main-es2015.bd0abfdbbb7bdbab9dea.js" type="module"></script><script src="main-es5.bd0abfdbbb7bdbab9dea.js" nomodule="" defer=""></script>

</body></html>
